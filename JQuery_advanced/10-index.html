<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <title>Task 10</title>
    <!-- Load jQuery from CDN (minified version with AJAX support) -->
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
</head>

<body>
    <script type="application/javascript">
        // Function to add a post row
        function addPostRow(data) {
            // Create a paragraph element
            var paragraph = $("<p>");
            // Create a span element with post details
            var span = $("<span>").text(
                `Post created with id: ${data.id}, title: ${data.title}, author: ${data.author}`
            );
            // Append span to the paragraph
            paragraph.append(span);
            // Append paragraph to the body
            $("body").append(paragraph);
        }

        // Function to list posts
        function listPosts() {
            // AJAX GET request to fetch posts
            $.get("http://localhost:3000/posts", function(response) {
                // Call addPostRow for each post in the response
                response.forEach(function(post) {
                    addPostRow(post);
                });
            }).fail(function() {
                // Display an alert if the server is unavailable
                alert("Server Error");
            });
        }

        // Call listPosts when the page loads
        $(document).ready(function() {
            listPosts();
        });
    </script>
</body>

</html>